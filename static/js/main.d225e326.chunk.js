(this.webpackJsonphandpose=this.webpackJsonphandpose||[]).push([[0],{232:function(e,t,n){e.exports=n(258)},237:function(e,t,n){},242:function(e,t){},243:function(e,t){},251:function(e,t){},254:function(e,t){},255:function(e,t){},256:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a=n(32),c=n.n(a),r=n(210),o=n.n(r),i=(n(237),n(257),n(230)),s=n(231),l=n.n(s);n(256);const u=e=>{const t=new SpeechSynthesisUtterance(e);window.speechSynthesis.speak(t)},d=()=>{window.speechSynthesis.cancel()};var h=function(){const e=Object(a.useRef)(null),t=Object(a.useRef)(null),[n,r]=Object(a.useState)(null),[o,s]=Object(a.useState)("environment"),[h,m]=Object(a.useState)(!0),[f,g]=Object(a.useState)(null),p=async()=>{const e=await i.load();console.log("Coco-SSD model loaded.");const t=setInterval(()=>{v(e)},10);g(t)},v=async a=>{if("undefined"!==typeof e.current&&null!==e.current&&4===e.current.video.readyState){const c=e.current.video,o=e.current.video.videoWidth,i=e.current.video.videoHeight;e.current.video.width=o,e.current.video.height=i,t.current.width=o,t.current.height=i;const s=await a.detect(c);((e,t)=>{let n=!1;e.forEach(e=>{const[a,c,r,o]=e.bbox,i=e.class,s=Math.floor(16777215*Math.random()).toString(16);t.strokeStyle="#"+s,t.font="18px Arial",t.beginPath(),t.fillStyle="#"+s,t.fillText(i,a,c),t.rect(a,c,r,o),t.stroke(),n=!0,u(i)}),n||d()})(s,t.current.getContext("2d"));const l=s.length>0?s[0].class:null;l&&l!==n&&(u(l),r(l))}},b=async t=>{try{console.log("Starting camera with facing mode:",t);const n=await navigator.mediaDevices.enumerateDevices();let a=null;n.forEach(e=>{"videoinput"===e.kind&&e.label.includes("back")&&(a=e.deviceId)});const c={video:{deviceId:a?{exact:a}:void 0,facingMode:t}};if(console.log("Selected Device ID:",a),n.some(e=>"videoinput"===e.kind)){const n=await navigator.mediaDevices.getUserMedia(c);e.current.srcObject=n,console.log("Camera started with facing mode:",t)}else console.error("No camera devices available."),alert("No camera devices available.")}catch(n){console.error("Error accessing camera:",n),alert("Error accessing camera. Please make sure your camera is enabled and try again.")}};return Object(a.useEffect)(()=>(console.log("Running useEffect"),p(),b(o),()=>{f&&clearInterval(f),window.speechSynthesis.cancel()}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("nav",{className:"navbar"},c.a.createElement("h1",{className:"navbar-title"},"Sight_Guide")),h&&c.a.createElement(l.a,{ref:e,muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:"90%",maxWidth:"640px",height:"auto",top:"80px"}}),h&&c.a.createElement("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:"90%",maxWidth:"640px",height:"auto",top:"80px"}}),n&&c.a.createElement("div",{style:{position:"absolute",bottom:80,left:"50%",transform:"translateX(-50%)",color:"white",padding:"10px 10px",borderRadius:2}},"Detected Object: ",n),c.a.createElement("button",{className:"button",onClick:()=>{const e="user"===o?"environment":"user";s(e),b(e)}},"Switch Camera"),c.a.createElement("button",{className:"stop-button",onClick:()=>{h?(()=>{if(e.current&&e.current.srcObject){e.current.srcObject.getTracks().forEach(e=>e.stop()),e.current.srcObject=null,r(null),m(!1),f&&(clearInterval(f),g(null)),window.speechSynthesis.cancel()}})():(b(o),p(),m(!0))}},h?"Close Camera":"Open Camera")))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(h,null)),document.getElementById("root"))}},[[232,1,2]]]);
//# sourceMappingURL=main.d225e326.chunk.js.map